buildscript {
    repositories {
        mavenCentral()
    }
    dependencies {
        classpath 'com.android.tools.build:gradle:0.9.+'
    }
}
apply plugin: 'android'

def getDefinedVersionName() {
    def stdout = new ByteArrayOutputStream()
    exec {
        commandLine 'git', 'log', '-n', '1', '--pretty=format:"%H"'
        standardOutput = stdout
    }
    return stdout.toString().trim().replace("\"","")
}

def getVersionCode = { ->

    def code = Math.round(new Date().getTime()/1000).toInteger()
    println "VersionCode is set to $code"
    return code
}


dependencies {
    compile files('libs/android-support-v4.jar')
    compile files('libs/zip4j_1.3.2.jar')
}

android {
    compileSdkVersion 19
    buildToolsVersion "19.0.1"

    defaultConfig {
        minSdkVersion 14
        targetSdkVersion 19
        versionCode getVersionCode()
        versionName getDefinedVersionName()
    }
}